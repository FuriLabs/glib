From: Simon McVittie <smcv@debian.org>
Date: Mon, 17 Sep 2018 09:31:36 +0100
Subject: Run tests with --tap argument for more verbose output

Signed-off-by: Simon McVittie <smcv@debian.org>
---
 gio/tests/meson.build      | 2 +-
 glib/tests/meson.build     | 2 +-
 gobject/tests/meson.build  | 2 +-
 tests/gobject/meson.build  | 2 +-
 tests/refcount/meson.build | 2 +-
 5 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/gio/tests/meson.build b/gio/tests/meson.build
index 4e5ad25..cbc3df2 100644
--- a/gio/tests/meson.build
+++ b/gio/tests/meson.build
@@ -447,7 +447,7 @@ foreach test_dict : gio_tests
 
     suite = ['gio'] + extra_args.get('suite', [])
     timeout = suite.contains('slow') ? 120 : 30
-    test(test_name, exe, env : test_env, timeout : timeout, suite : suite)
+    test(test_name, exe, env : test_env, timeout : timeout, suite : suite, args : ['--tap'])
   endforeach
 endforeach
 
diff --git a/glib/tests/meson.build b/glib/tests/meson.build
index 0af71b0..75e5192 100644
--- a/glib/tests/meson.build
+++ b/glib/tests/meson.build
@@ -171,7 +171,7 @@ foreach test_name, extra_args : glib_tests
 
     suite = ['glib'] + extra_args.get('suite', [])
     timeout = suite.contains('slow') ? 120 : 30
-    test(test_name, exe, env : test_env, timeout : timeout, suite : suite)
+    test(test_name, exe, env : test_env, timeout : timeout, suite : suite, args : ['--tap'])
   endif
 endforeach
 
diff --git a/gobject/tests/meson.build b/gobject/tests/meson.build
index cc83c5f..75e3ae6 100644
--- a/gobject/tests/meson.build
+++ b/gobject/tests/meson.build
@@ -89,7 +89,7 @@ foreach test_name, extra_args : gobject_tests
 
   suite = ['gobject'] + extra_args.get('suite', [])
   timeout = suite.contains('slow') ? 120 : 30
-  test(test_name, exe, env : test_env, timeout : timeout, suite : suite)
+  test(test_name, exe, env : test_env, timeout : timeout, suite : suite, args : ['--tap'])
 endforeach
 
 test(
diff --git a/tests/gobject/meson.build b/tests/gobject/meson.build
index 4944599..a352e5e 100644
--- a/tests/gobject/meson.build
+++ b/tests/gobject/meson.build
@@ -57,7 +57,7 @@ foreach t : gobject_tests
     install : false,
   )
   # FIXME? TESTS_ENVIRONMENT = LIBCHARSET_ALIAS_DIR=$(top_builddir)/glib/libcharset
-  test(test_name, exe, env : test_env, timeout : test_timeout, suite : test_suite)
+  test(test_name, exe, env : test_env, timeout : test_timeout, suite : test_suite, args : ['--tap'])
 endforeach
 
 # Don't install these ones, and keep them out of 'make check' because they take too long...
diff --git a/tests/refcount/meson.build b/tests/refcount/meson.build
index 9046bf7..ea57182 100644
--- a/tests/refcount/meson.build
+++ b/tests/refcount/meson.build
@@ -26,5 +26,5 @@ foreach t : refcount_tests
     install : false,
   )
   # FIXME? TESTS_ENVIRONMENT = LIBCHARSET_ALIAS_DIR=$(top_builddir)/glib/libcharset
-  test(test_name, exe, env : test_env, timeout : test_timeout, suite : test_suite)
+  test(test_name, exe, env : test_env, timeout : test_timeout, suite : test_suite, args : ['--tap'])
 endforeach
