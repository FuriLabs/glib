From: Philip Withnall <pwithnall@endlessos.org>
Date: Fri, 14 Apr 2023 17:55:37 +0100
Subject: Revert "gfileinfo: Temporarily downgrade missing attribute criticals
 to debugs"
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

This reverts commit 4cad66580b698e01d196cddc3b9950940a41fee9.

Downgrading the criticals was only temporary. Now weâ€™ve branched for
GLib 2.78, the criticals can be reinstated early this cycle, so people
have the maximum time to fix latent bugs in their code.

Fixes: #2951

Origin: https://gitlab.gnome.org/GNOME/glib/-/commit/01d5b41afa48a0e59cddf073b10ac831ccb596c2
Applied-upstream: 2.77.1, commit:01d5b41afa48a0e59cddf073b10ac831ccb596c2
---
 gio/gfileinfo.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/gio/gfileinfo.c b/gio/gfileinfo.c
index d9c7d70..ca42add 100644
--- a/gio/gfileinfo.c
+++ b/gio/gfileinfo.c
@@ -1500,8 +1500,8 @@ g_file_info_set_attribute_int64  (GFileInfo  *info,
     *value_ptr = g_file_info_find_value (info, attr); \
     if (G_UNLIKELY (*value_ptr == NULL)) \
       { \
-        g_debug ("GFileInfo created without " attribute_name); \
-        return error_value; \
+        g_critical ("GFileInfo created without " attribute_name); \
+        g_return_val_if_reached (error_value); \
       } \
   } G_STMT_END
 
@@ -1837,9 +1837,9 @@ g_file_info_get_modification_time (GFileInfo *info,
 
   if (G_UNLIKELY (value == NULL))
     {
-      g_debug ("GFileInfo created without " G_FILE_ATTRIBUTE_TIME_MODIFIED);
+      g_critical ("GFileInfo created without " G_FILE_ATTRIBUTE_TIME_MODIFIED);
       result->tv_sec = result->tv_usec = 0;
-      return;
+      g_return_if_reached ();
     }
 
   result->tv_sec = _g_file_attribute_value_get_uint64 (value);
